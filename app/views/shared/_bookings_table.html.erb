<div class="card-container">
  <table class="table table-hover">
    <thead>
      <h4><strong>Liste de vos interventions</strong></h4>
      <tr>
        <th scope="col">Référence</th>
        <th scope="col">Commandé le</th>
        <th scope="col">Adresse</th>
        <th scope="col">Client</th>
        <th scope="col"> Entreprise </th>
        <th scope="col">Durée</th>
        <th scope="col">Date</th>
        <th scope="col">Liens</th>
      </tr>
    </thead>
    <tbody>
      <% unless bookings.nil? %>
        <% bookings.each do |booking| %>
          <tr>
            <th scope="row">#<%= booking.reference %></th>
            <td><%= booking.created_at.strftime("%d/%m/%y") %></td>
            <td><%= booking.address %></td>
            <td><%= booking.user.first_name + ' ' + booking.user.last_name %></td>
            <td><%= booking.user.pro? ? booking.user.company.name : "Particulier" %></td>
            <td><%= booking.availabilities.size.odd? ? "#{booking.availabilities.size} demi-journées" : "#{booking.availabilities.size / 2} journées" %></td>
            <td>
              <% if @user.manager? && booking.availabilities.first.pending? %>
                <%= link_to "Valider dates", manager_planning_path %>
              <% else %>
                <% booking.availabilities.map do |availability| availability.date end.uniq.sort.each do |date| %>
                  <p><%= date.strftime("%d/%m/%y") %></p>
                <% end %>
              <% end %>
            </td>
            <td><%= link_to [@user.role, booking] do %>
                <i class="fa fa-eye"></i>
              <% end %>
            </td>
          </tr>
        <% end %>
      <% end %>
    </tbody>
  </table>
</div>
