<%= month_calendar(attribute: :date, events: @availabilities) do |date, availabilities| %>
  <div class="date-day"><%= date.day %></div>
  <div class="cell-content">
    <div class="btn-container">
      <% unless availabilities.empty? %>
        <% morning_availability = availabilities.find { |availability| availability.half == "matin" } %>
          <div class="btn-calendar btn-calendar-<%= morning_availability.status %>" data-availability-id="<%= morning_availability.id %>" >
            <%= morning_availability.half %>
            <%= morning_availability.status %>
          </div>

        <% afternoon_availability = availabilities.find { |availability| availability.half == "aprem" } %>
          <div class="btn-calendar btn-calendar-<%= afternoon_availability.status %>" data-availability-id="<%= afternoon_availability.id %>" >
            <%= afternoon_availability.half %>
            <%= afternoon_availability.status %>
          </div>
      <% end %>
    </div>
  <% end %>
</div>
